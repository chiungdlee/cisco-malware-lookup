module "resource_group" {
  source = "../../modules/resource_group"
  resource_group_name = var.resource_group_name
  location            = var.location
}

module "aks" {
  source = "../../modules/aks"
  resource_group_name = module.resource_group.resource_group_name
  location            = module.resource_group.location
  aks_cluster_name    = var.aks_cluster_name
  node_count          = var.node_count
  node_vm_size        = var.node_vm_size
}

module "mysql" {
  source = "../../modules/mysql"
  resource_group_name       = module.resource_group.resource_group_name
  location                  = module.resource_group.location
  mysql_server_name         = var.mysql_server_name
  mysql_server_admin        = var.mysql_server_admin
  mysql_server_password     = var.mysql_server_password
  mysql_database_name       = var.mysql_database_name
  mysql_server_version      = var.mysql_server_version
  mysql_storage_mb          = var.mysql_storage_mb
  mysql_backup_retention    = var.mysql_backup_retention
  mysql_geo_redundant_backup= var.mysql_geo_redundant_backup
}